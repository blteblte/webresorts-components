/*! Built with http://stenciljs.com */
const{h:t}=window.WrstsComponents,e="wrsts-checkbox, wrsts-select, wrsts-tinymce";class s{componentDidLoad(){this.rebind()}rebind(){this.formElements=Array.prototype.slice.call(this.wrstsJsonForm.querySelectorAll(e)),this.form=this.wrstsJsonForm.querySelector("form")}toJson(t=0){return this.formElements.reduce((e,s)=>(e.push(s.toJson(t)),e),[])}submit(t,e=0){if(!this.ajax&&this.form)this.form.submit();else{const r=this.toJson(e);(s=this.action,o=this.method,r=JSON.stringify(r),new Promise(function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status?t(n.responseText):4==n.readyState&&200!==n.status&&e(n)},n.open(o,s,!0),n.send(r)})).then(t).catch(t)}var s,o}render(){return t("div",null,this.ajax?t("slot",null):t("form",{action:this.action,method:this.method,target:this.target,novalidate:!0},t("slot",null)))}static get is(){return"wrsts-json-form"}static get properties(){return{action:{type:String,attr:"action"},ajax:{type:Boolean,attr:"ajax"},method:{type:String,attr:"method"},rebind:{method:!0},submit:{method:!0},target:{type:String,attr:"target"},toJson:{method:!0},wrstsJsonForm:{elementRef:!0}}}}export{s as WrstsJsonForm};